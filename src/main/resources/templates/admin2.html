<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
  <th:block th:include="general.html :: headerfiles">
  </th:block>
  <link href="/css/admin.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
  <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="d-flex flex-column" >
<header th:insert="general.html :: header"> </header>
<div style="position: relative">
<div class="vertical-nav bg-white" id="sidebar">
  <div class="py-4 px-3 mb-4 bg-light">
    <div class="media d-flex align-items-center"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSriFFJXaLLV3g1bFT8PrDRFbD50XjQ7lm_0g&usqp=CAU" alt="..." width="65" class="mr-3 rounded-circle img-thumbnail shadow-sm">
      <div class="media-body">
        <h4 class="m-0" th:text="${User.getName() + ' ' + User.getSurname()}"></h4>
        <p class="font-weight-light text-muted mb-0">Администратор</p>
      </div>
    </div>
  </div>

  <p class="text-gray font-weight-bold text-uppercase px-3 small pb-4 mb-0">Разделы</p>

  <ul class="nav flex-column bg-white mb-0">
    <li class="nav-item">
      <a href="#" class="nav-link text-dark font-italic bg-light" onclick="section(0)">
        <i class="fa fa-users mr-3 text-primary fa-fw"></i>
        Пользователи
      </a>
    </li>
    <li class="nav-item">
      <a href="#" class="nav-link text-dark font-italic bg-light" onclick="section(1)">
        <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
        Заказы
      </a>
    </li>
    <li class="nav-item">
      <a href="#" class="nav-link text-dark font-italic bg-light" onclick="section(2)">
        <i class="fa fa-cubes mr-3 text-primary fa-fw"></i>
        Товары
      </a>
    </li>
    <li class="nav-item">
      <a href="#" class="nav-link text-dark font-italic bg-light" onclick="section(3)">
        <i class="fa fa-picture-o mr-3 text-primary fa-fw"></i>
        Категории
      </a>
    </li>
  </ul>


</div>
<!-- End vertical navbar -->


<!-- Page content holder -->
<div class="page-content p-5 " id="content">
  <!-- Toggle button -->
  <button id="sidebarCollapse" type="button" class="btn btn-light bg-white rounded-pill shadow-sm px-4 mb-4"><i class="fa fa-bars mr-2"></i><small class="text-uppercase font-weight-bold">Toggle</small></button>

  <!-- Demo content -->
  <h2 class="display-4 text-white" id="nazvanie"></h2>

  <div class="separator"></div>
    <div class="table-responsive">
      <div id="users">
      <table class="table table-dark table-hover" th:if="${not users.isEmpty()}" >
        <thead style="background-color: coral; ">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Имя пользователя</th>
          <th scope="col">Роль</th>
          <th scope="col">Данные</th>
          <th>Действие</th>
        </tr>
        </thead>
        <tbody style="background: linear-gradient(to right, #599fd9, #c2e59c)">
        <th:block th:each="user :${users}">
          <tr th:if="${User !=user}">
            <form th:action="@{/changeRole/{number}(number=${user.getId()})}"  method="post" th:object="${user}">
            <th  th:value="${user.getId()}" th:text="${user.getId()}" th:field="*{Id}"></th>
            <th th:text="${user.getUsername()}"></th>
            <th>
              <div th:if="${user.getUserRole().name()=='USER'}">
              <select  th:field="*{UserRole}">
                <option th:value="USER" selected>USER</option>
                <option th:value="ADMIN">ADMIN</option>
              </select>
                </div>
              <div th:if="${user.getUserRole().name()=='ADMIN'}">
                <select  th:field="*{UserRole}">
                  <option th:value="'ADMIN'" selected>ADMIN</option>
                  <option th:value="'USER'">USER</option>
                </select>
              </div>
            </th>
            <th><span class="badge badge-info"><a style="color: whitesmoke" th:href="@{admin/{number}(number=${user.getId()})}">Info</a></span></th>
            <th>
              <button type="submit" class="btn btn-warning"><i class="fa fa-pencil" aria-hidden="true"></i></button>
              <a th:href="@{/deleteUser/{number}(number=${user.getId()})}" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
            </th>
            </form>
          </tr>
        </th:block>
        </tbody>
      </table>
      </div>
      <div id="orders">
        <table class="table table-dark table-hover" th:if="${not users.isEmpty()}" >
          <thead style="background-color: coral; ">
          <tr>
            <th scope="col">#</th>
            <th scope="col">клиент</th>
            <th scope="col">Статус</th>
            <th scope="col">Данные</th>
            <th>Действие</th>
          </tr>
          </thead>
          <tbody style="background: linear-gradient(to right, #599fd9, #c2e59c)">
          <th:block th:each="order :${orders}">
              <tr>
                <th th:text="${order.getId()}"></th>
                <th th:text="${order.getUserid()}"></th>
                <th >
                  <h5 th:if="${order.getStatus()}==-1" style="color: #fff1e1">В корзине</h5>
                  <select th:value="${order.getStatus()}" th:if="${order.getStatus()}==0">
                    <option th:value="0" selected>Доставлен на склад</option>
                    <option th:value="1">Отправлен в пункт самовывоза</option>
                    <option th:value="2">Готов к получению</option>
                  </select>
                  <select th:value="${order.getStatus()}" th:if="${order.getStatus()}==1">
                    <option th:value="0" >Доставлен на склад</option>
                    <option th:value="1" selected>Отправлен в пункт самовывоза</option>
                    <option th:value="2">Готов к получению</option>
                  </select>
                  <select th:value="${order.getStatus()}" th:if="${order.getStatus()}==2">
                    <option th:value="0" >Доставлен на склад</option>
                    <option th:value="1" >Отправлен в пункт самовывоза</option>
                    <option th:value="2" selected>Готов к получению</option>
                  </select>
                </th>
                <th><span class="badge badge-info"><a style="color: whitesmoke" th:href="@{admin/{number}(number=${order.getId()})}">Edit</a></span></th>
                <th>
                  <button type="submit" class="btn btn-warning"><i class="fa fa-pencil" aria-hidden="true"></i></button>
                  <a href="" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                </th>
              </tr>
          </th:block>
          </tbody>
        </table>
      </div>
      <div id="products">
        <table class="table table-dark table-hover" th:if="${not users.isEmpty()}" >
          <thead style="background-color: coral; ">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Название</th>
            <th scope="col">Стоимость</th>
            <th scope="col">Количество</th>
            <th scope="col">Данные</th>
            <th>Действие</th>
          </tr>
          </thead>
          <tbody style="background: linear-gradient(to right, #599fd9, #c2e59c)">
            <th:block th:each="product :${products}">
              <form th:action="@{/changeRole/{number}(number=${user.getId()})}"  method="post" th:object="${user}">
                <tr>
                    <th th:text="${product.getId()}"></th>
                    <th th:text="${product.getName()}"></th>
                    <th th:text="${product.getPrice()}"></th>
                    <th th:text="${product.getQuantity()}"></th>
                    <th><span class="badge badge-info"><a style="color: whitesmoke" th:href="@{admin/{number}(number=${user.getId()})}">Edit</a></span></th>
                    <th>
                     <button type="submit" class="btn btn-warning"><i class="fa fa-pencil" aria-hidden="true"></i></button>
                     <a th:href="@{/deleteUser/{number}(number=${user.getId()})}" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                    </th>
                </tr>
              </form>
            </th:block>
          </tbody>
        </table>
      </div>
      <div id="categories">
        <table class="table table-dark table-hover" th:if="${not users.isEmpty()}" >
          <thead style="background-color: coral; ">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Название</th>
            <th scope="col">Английское название</th>
            <th scope="col">Ссылка на изображение</th>
            <th>Данные</th>
            <th>Действие</th>
          </tr>
          </thead>
          <tbody style="background: linear-gradient(to right, #599fd9, #c2e59c)">
            <th:block th:each="category :${categories}">
              <form th:action="@{/changeRole/{number}(number=${user.getId()})}"  method="post" th:object="${user}">
                <tr>
                  <th><input style="border: none" class="text-secondary" th:value="${category.getId()}"/></th>
                  <th><input style="border: none" class="text-secondary" th:value="${category.getName()}"/></th>
                  <th><input style="border: none" class="text-secondary" th:value="${category.getEngname()}"/></th>
                  <th><input style="border: none" class="text-secondary" th:value="${category.getLink()}"/></th>
                  <th><span class="badge badge-info"><a style="color: whitesmoke" onclick="change_text();">Edit</a></span></th>
                  <th>
                    <button type="submit" class="btn btn-warning"><i class="fa fa-pencil" aria-hidden="true"></i></button>
                    <a th:href="@{/deleteUser/{number}(number=${user.getId()})}" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>
                  </th>
                </tr>
              </form>
            </th:block>
          </tbody>



        </table>
      </div>
<script>
  $(function() {
    // Sidebar toggle behavior
    $("#orders").hide();
    $("#products").hide();
    $("#categories").hide();
    $("#nazvanie").text("Пользователи")
    $('#sidebarCollapse').on('click', function() {
      $('#sidebar, #content').toggleClass('active');
    });
  });
  function section(x){
    $("#orders").hide();
    $("#products").hide();
    $("#users").hide();
    $("#categories").hide();
    if(x===0){
      $("#users").show();
      $("#nazvanie").text("Пользователи");
    }
    if(x===1){
      $("#orders").show();
      $("#nazvanie").text("Заказы");
    }
    if(x===2){
      $("#products").show();
      $("#nazvanie").text("Товары");
    }
    if(x===3){
      $("#categories").show();
      $("#nazvanie").text("Категории");
    }
  }
</script>
</div>
</div>
</div>
<div th:replace="general.html :: footer"></div>
</body>
</html>